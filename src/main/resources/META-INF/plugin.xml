<idea-plugin>
    <id>com.z8dn.plugins.a2pt</id>
    <name>Advanced Android Project Tree</name>
    <vendor url="https://z8dn.github.io/">Zayden</vendor>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.java</depends>
    <depends>org.jetbrains.plugins.gradle</depends>
    <depends>org.jetbrains.android</depends>

    <resource-bundle>messages.AndroidViewBundle</resource-bundle>

    <extensions defaultExtensionNs="com.intellij">
        <!-- Android View Settings Service -->
        <applicationService serviceImplementation="com.z8dn.plugins.a2pt.settings.AndroidViewSettings"/>

        <!-- Android View Settings Configurable -->
        <applicationConfigurable
                parentId="tools"
                instance="com.z8dn.plugins.a2pt.settings.AndroidViewSettingsConfigurable"
                id="com.z8dn.plugins.a2pt.settings"
                key="settings.DisplayName.text"
                bundle="messages.AndroidViewBundle"/>

        <!-- Startup Activity to refresh view on project open -->
        <postStartupActivity implementation="com.z8dn.plugins.a2pt.AndroidViewStartupActivity"/>

        <!-- Tree Structure Provider for adding project files to non-Android modules -->
        <treeStructureProvider implementation="com.z8dn.plugins.a2pt.providers.CustomNonAndroidNodeProvider"/>

        <!-- Tree Structure Provider for adding top-level ProjectFileGroupNode -->
        <treeStructureProvider implementation="com.z8dn.plugins.a2pt.providers.ProjectFilesTreeStructureProvider"/>
    </extensions>

    <!-- Android View Node Providers -->
    <extensions defaultExtensionNs="com.android.tools.idea.navigator">
        <!-- Provider that handles build directories and project files -->
        <androidViewNodeProvider implementation="com.z8dn.plugins.a2pt.providers.AdvancedAndroidViewProvider"/>
    </extensions>

    <!-- Toggle Actions for Android View -->
    <actions>
        <group id="com.z8dn.plugins.a2pt.AppearanceActions">
            <add-to-group group-id="ProjectView.ToolWindow.Appearance.Actions"
                          relative-to-action="ShowBuildFilesInModuleAction"
                          anchor="after"/>
            <separator/>
            <action id="com.z8dn.plugins.a2pt.ShowBuildDirectoryAction"
                    class="com.z8dn.plugins.a2pt.actions.ShowBuildDirectoryAction"/>
            <action id="com.z8dn.plugins.a2pt.ShowProjectFilesInModuleAction"
                    class="com.z8dn.plugins.a2pt.actions.ShowProjectFilesInModuleAction"/>
            <action id="CustomizeAndroidTreeViewAction"
                    class="com.z8dn.plugins.a2pt.actions.CustomizeAndroidTreeViewAction"
                    text="Customize Android Tree View..."
                    description="Open Advanced Android Project Tree settings"/>
        </group>
    </actions>
</idea-plugin>
