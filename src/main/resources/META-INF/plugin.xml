<idea-plugin>
    <id>com.z8dn.plugins.a2pt</id>
    <name>Advanced Android Project View</name>
    <vendor url="https://z8dn.github.io/">Zayden</vendor>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.java</depends>
    <depends>org.jetbrains.plugins.gradle</depends>
    <depends>org.jetbrains.android</depends>

    <resource-bundle>messages.AndroidViewBundle</resource-bundle>

    <extensions defaultExtensionNs="com.intellij">
        <!-- Android View Settings Service -->
        <applicationService serviceImplementation="com.z8dn.plugins.a2pt.AndroidViewSettings"/>

        <!-- Android View Settings Configurable -->
        <applicationConfigurable
                parentId="tools"
                instance="com.z8dn.plugins.a2pt.AndroidViewSettingsConfigurableNew"
                id="com.z8dn.plugins.a2pt.settings"
                key="settings.displayName"
                bundle="messages.AndroidViewBundle"/>
    </extensions>

    <!-- Android View Node Providers -->
    <extensions defaultExtensionNs="com.android.tools.idea.navigator">
        <!-- Consolidated provider handles both build directories and custom files to prevent duplicate module wrapping -->
        <androidViewNodeProvider implementation="com.z8dn.plugins.a2pt.AndroidViewCustomNodesProvider"/>
    </extensions>

    <!-- Tree Structure Provider for top-level Custom Nodes grouping -->
    <extensions defaultExtensionNs="com.intellij">
        <treeStructureProvider implementation="com.z8dn.plugins.a2pt.CustomNodesTreeStructureProvider"/>
    </extensions>

    <!-- Toggle Actions for Android View -->
    <actions>
        <group id="com.z8dn.plugins.a2pt.AppearanceActions">
            <add-to-group group-id="ProjectView.ToolWindow.Appearance.Actions"
                          relative-to-action="ShowBuildFilesInModuleAction"
                          anchor="after"/>
            <action id="com.z8dn.plugins.a2pt.ShowBuildDirectoryAction"
                    class="com.z8dn.plugins.a2pt.ShowBuildDirectoryAction"/>
            <action id="com.z8dn.plugins.a2pt.ShowCustomFilesAction"
                    class="com.z8dn.plugins.a2pt.ShowCustomFilesAction"/>
            <action id="com.z8dn.plugins.a2pt.GroupCustomNodesAction"
                    class="com.z8dn.plugins.a2pt.GroupCustomNodesAction"/>
            <separator/>
            <action id="com.z8dn.plugins.a2pt.OpenSettingsAction"
                    class="com.z8dn.plugins.a2pt.OpenSettingsAction"
                    text="Advanced Android Project View Settings..."
                    description="Open Advanced Android Project View settings"/>
        </group>
    </actions>
</idea-plugin>
