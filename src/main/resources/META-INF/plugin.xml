<idea-plugin>
    <id>com.z8dn.plugins.a2pt</id>
    <name>Advanced Android Project View</name>
    <vendor url="https://z8dn.github.io/">Zayden</vendor>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.java</depends>
    <depends>org.jetbrains.plugins.gradle</depends>
    <depends>org.jetbrains.android</depends>

    <resource-bundle>messages.AndroidViewBundle</resource-bundle>

    <extensions defaultExtensionNs="com.intellij">
        <!-- Android View Settings Service -->
        <applicationService serviceImplementation="com.z8dn.plugins.a2pt.AndroidViewSettings"/>

        <!-- Android View Settings Configurable -->
        <applicationConfigurable
                parentId="tools"
                instance="com.z8dn.plugins.a2pt.AndroidViewSettingsConfigurable"
                id="com.z8dn.plugins.a2pt.settings"
                displayName="Advanced Android Project View"/>
    </extensions>

    <!-- Android View Node Providers -->
    <extensions defaultExtensionNs="com.android.tools.idea.navigator">
        <!-- Consolidated provider handles both build directories and custom files to prevent duplicate module wrapping -->
        <androidViewNodeProvider implementation="com.z8dn.plugins.a2pt.AndroidViewCustomNodesProvider"/>
    </extensions>

    <!-- Toggle Actions for Android View -->
    <actions>
        <group id="com.z8dn.plugins.a2pt.AppearanceActions">
            <add-to-group group-id="ProjectView.ToolWindow.Appearance.Actions"
                          relative-to-action="ShowBuildFilesInModuleAction"
                          anchor="after"/>
            <action id="com.z8dn.plugins.a2pt.ShowBuildDirectoryAction"
                    class="com.z8dn.plugins.a2pt.ShowBuildDirectoryAction"/>
            <action id="com.z8dn.plugins.a2pt.ShowCustomFilesAction"
                    class="com.z8dn.plugins.a2pt.ShowCustomFilesAction"/>
        </group>
    </actions>
</idea-plugin>
